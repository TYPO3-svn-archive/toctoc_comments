function ttc_autoajaxfelogin(t,e){document.getElementById("user").value=t,document.getElementById("pass").value=e;var o=document.getElementById("tx_toctoccomments_pi2_submit");ttc_ajaxfelogin(o)}function successlogin(t,e,o,r,i,c,n,s,a,d,l){if(t.redirect);else{var m="";if(0==e){jQuery("#formhider-"+o).html(r),jQuery("#formhider-"+o).css("min-height","40px");var f=t.data.replace("tx_toctoccomments_pi2_formlo","tx_toctoccomments_pi2_formlog");loggedinarr=t.data.split("Youre logged in"),loggedinarr.length>1?""!==i&&(jQuery("#"+l).css("display","none"),m=f.replace('id="tx-tc-loginform"','id="tx-tc-loginform-2"'),m=m.replace("tx_toctoccomments_pi2_formlog","tx_toctoccomments_pi2_formlogout"),m=m.replace("Youre logged in.",""),tclogincarddec=m,toctoc_comments_refresh(i,c,o),newqrystr=jQuery.param(jQuery(n))+"&"+s+"=1&tx_toctoccomments_pi2[ajax]="+a,""!=t.refresh&&(refreshidlist=t.refresh.split(","),newqrystr=newqrystr.replace("&logintype=login",""),newqrystr+="&refreshcontent=refresh",jQuery.ajax({type:"POST",url:d,asych:!0,data:newqrystr,success:function(t){for(ix=0;ix<refreshidlist.length;ix++)refreshidlist[ix]=tctrim(refreshidlist[ix]),setAJAXhtml(refreshidlist[ix],t)}}))):""!==i&&(jQuery("#formhider-"+o).css("opacity","0"),jQuery("#formhider-"+o).html(f),toctoc_comments_fadein("formhider-"+o),tt_showloginbind(),rebindanswersignup()),lougoutelem=document.getElementById("tx-tc-loginout"),lougoutelem&&(jQuery("#tx-tc-loginout").css("opacity","0"),toctoc_comments_fadein("tx-tc-loginout"))}else{f=t.data,f=t.data.replace("Youre logged in.",""),tclogincarddec=f;var u=0;f==t.data?f=f.substr(String('<div class="tx-tc-loginform" id="tx-tc-loginform">').length+6):u=1,jQuery("#tx-tc-loginform").html(f),tt_showloginbind(),f!=t.data&&($("#tx-tc-loginform").css("opacity","0"),window.setTimeout("toctoc_comments_fadein('tx-tc-loginform');",100),newqrystr=jQuery.param(jQuery(n))+"&"+s+"=1&tx_toctoccomments_pi2[ajax]="+a,""!=t.refresh&&(refreshidlist=t.refresh.split(","),newqrystr=newqrystr.replace("&logintype=login",""),newqrystr+="&refreshcontent=refresh",jQuery.ajax({type:"POST",url:d,data:newqrystr,success:function(t){for(ix=0;ix<refreshidlist.length;ix++)refreshidlist[ix]=tctrim(refreshidlist[ix]),setAJAXhtml(refreshidlist[ix],t);1==sendbackafterloginout&&1==u&&window.history.back()}})))}jQuery("#tx-tc-loginlogoutinprogress").css("display","none"),jQuery("#tx-tc-loginlogoutinprogress").removeClass("tx-tc-blockdisp"),jQuery("#tx-tc-loginlogoutinprogress").addClass("tx-tc-nodisp")}}function tc_rsaauth_feencrypt(t){if(!t.pass.value.match(/^rsa:/)&&""!=t.n.value&&""!=t.e.value){var e=new RSAKey;e.setPublic(t.n.value,t.e.value);var o=(t.user.value,t.pass.value),r=e.encrypt(o);t.pass.value="",t.e.value="",t.n.value="",r&&(t.pass.value="rsa:"+hex2b64(r))}}function ttc_ajaxfelogin(t,e,o,r){var c=t.form.id.substr(0,t.form.id.length-5),n=document.getElementById(t.form.id),s=t.form.id,a=t.form.action;a=a.replace("%5B","["),a=a.replace("%5D","]");var d=jQuery(t.form).serializeArray(),l=t.name;if(jQuery("#"+t.form.id).css("opacity","0.6"),String(t.form.onsubmit).replace("tx_rsaauth_feencrypt","")!=String(t.form.onsubmit)||String(t.form.onsubmit).replace("TYPO3FrontendLoginFormRsaEncryption","")!=String(t.form.onsubmit)||1==plsUseRSA&&"login"==t.form.elements.logintype.value){if(!o){var m="&getrsahash=1",f=[];f.onSubmit="",f.extraHidden="",jQuery.ajax({type:"POST",url:a,async:!1,data:jQuery.param(jQuery(d))+"&"+l+"=1&tx_toctoccomments_pi2[ajax]="+c+m,success:function(t){var e=utf8_decode(tcb64_dec(t)),o=e.split("toctoc-data-sep");f.onSubmit=o[0],f.extraHidden=o[1]},error:function(t,e,o){var r=utf8_decode(tcb64_dec(t.responseText)),i=r.split("toctoc-data-sep");f.onSubmit=i[0],f.extraHidden=i[1]}});var u=f.extraHidden.split('value="');if(""!=f.extraHidden){var p=u[1].split('"')[0],x=u[2].split('"')[0];document.getElementById("rsa_n").value=p,document.getElementById("rsa_e").value=x}d=jQuery(t.form).serializeArray(),String(t.form.onsubmit).replace("tx_rsaauth_feencrypt","")!=String(t.form.onsubmit)?tx_rsaauth_feencrypt(t.form):0==plsUseRSA?T3FrontendLoginFormRsaEncryption.submitForm(t.form,"index.php?eID=FrontendLoginRsaPublicKey"):T3FrontendLoginFormRsaEncryption.submitForm(t.form,"index.php?eID=RsaPublicKeyGenerationController")}d=jQuery(t.form).serializeArray()}if(1!=e&&!o){if(""==document.getElementById("user").value)return;if(""==document.getElementById("pass").value)return}var g="";"fbLogin"==o&&(g="&tx_toctoccomments_pi2[fbLogin]=1"),"googleLogin"==o&&(g="&tx_toctoccomments_pi2[googleLogin]=1&tx_toctoccomments_pi2[googleEncUser]="+r),ttid="",ttrid="",ttcontentid="",commentid="";var y=0;for(i=1;i<10;i++)if(tr=n.parentNode,tr){if(tr.hasAttribute&&tr.hasAttribute("id")){if(ttid=tr.getAttribute("id"),ttrid=ttid.replace("tx-tc-cts-dp-",""),ttcontentidtest=ttid.replace("tx-tc-formsqueezer-",""),ttcontentidtest!==ttid&&(commentid=ttcontentidtest,ttcontentidtestarr=ttcontentidtest.split("6g9"),ttcontentid=ttcontentidtestarr[0]),ttid!==ttrid?y=1:(ttrid=ttid.replace("tx-tc-form-dp-",""),ttid!==ttrid&&(y=1)),1===y)break;ttid="",ttrid=""}n=tr}var _=0;if(""!==ttrid){var h=ttrid.lastIndexOf("_"),b=ttrid.substr(h+1),v=b.split("6g9");v.length>1&&(b=v[0],ttrid=ttrid.substr(0,h+1)+b),_=0}else _=1;if(tttip("hide"),1==e)tt_logout(b,ttrid);else{var j=document.getElementById("tx-tc-loginlogoutinprogress").innerHTML;0==_&&(jQuery("#formhider-"+commentid).html(j),jQuery("#formhider-"+commentid).css("min-height","40px")),jQuery.ajax({type:"POST",url:a,async:!1,data:jQuery.param(jQuery(d))+"&"+l+"=1&tx_toctoccomments_pi2[ajax]="+c+g,success:function(t){var e=utf8_decode(tcb64_dec(t)),o=[],r=e.split("toctoc-data-sep");o.redirect=r[0],o.data=r[1],o.refresh=r[2],successlogin(o,_,commentid,j,ttrid,ttcontentid,d,l,c,a,s)},error:function(t,e,o){var r=utf8_decode(tcb64_dec(t.responseText)),i=[],n=r.split("toctoc-data-sep");i.redirect=n[0],i.data=n[1],i.refresh=n[2],successlogin(i,_,commentid,j,ttrid,ttcontentid,d,l,c,a,s)}})}return!1}function setAJAXhtml(t,e){var o=e.split('id="'+t+'"');if(2==o.length){var r=o[0].split("<"),i=r[r.length-1].split(" "),c=i[0],n=o[1].split("</"+c);if(n.length>1){var s=o[1].substr(o[1].split(">")[0].length+1),a=s.split("</"+c),d=s.split("<"+c),l=("<"+c+d[0]).length,m=a[0].length,f=0,u=0,p="";if(l>m)p=a[0]+"</"+c+">";else{for(;1!=f;)if(l>m)f=1;else{for(;m>l;)p=p+a[u]+"</"+c,l+=("<"+c+d[u+1]).length,m+=(a[u+1]+"</"+c).length,u++;p=p+a[u]+"</"+c}p+=">"}}else p="<"+r[r.length-1]+'"'+t+'"'+o[1].split(">")[0];$("#"+t).html(p)}else{var x=document.getElementById(t);x&&(x.outerHTML="")}return!1}function tt_logout(t,e){var o=0,r="";if(r=""!=tclogincarddec?tclogincarddec:utf8_decode(tcb64_dec(tclogincard)),document.body.innerHTML+='<div id="frmtmplogout" class="tx-tc-nodisp">'+r+"</div>",""==e)o=1;else{var i=t,c=e.lastIndexOf("_"),n=t.split("6g9");n.length>1&&(t=n[0],e=e.substr(0,c+1)+t),ttcontentid=t}var s=document.getElementById("tx_toctoccomments_pi2_formlogout_submit");if(0==o)var a=document.getElementById("tx-tc-loginlogoutinprogress-"+i).innerHTML;var d=0;0===o&&(d=parseInt(document.getElementById("cf"+i).offsetHeight)-10-parseInt(document.getElementById("textarea-"+i).offsetHeight),jQuery("#formhider-"+i).html(a),jQuery("#tx-tc-div-submit"+i).css("display","none"),jQuery("#formhider-"+i).css("min-height",d+"px"));var l=[],m=jQuery.param(jQuery(s.form).serializeArray())+"&"+s.name+"=1&tx_toctoccomments_pi2[ajax]=tx_toctoccomments_pi2",f=s.form.action;f=f.replace("%5B","["),f=f.replace("%5D","]");var u=s.form.id;return tttip("hide"),jQuery.ajax({type:"POST",url:f,data:jQuery.param(jQuery(s.form).serializeArray())+"&"+s.name+"=1&tx_toctoccomments_pi2[ajax]=tx_toctoccomments_pi2",success:function(t){var r=utf8_decode(tcb64_dec(t)),c=[],n=r.split("toctoc-data-sep");c.redirect=n[0],c.data=n[1],c.refresh=n[2],c.redirect?window.location.href=c.redirect:(htmlforform=c.data,tclogincarddec=htmlforform,0===o?(d=parseInt(document.getElementById("formhider-"+i).offsetHeight),jQuery("#"+u).css("display","none"),toctoc_comments_refresh(e,ttcontentid,i,1),""!=c.refresh&&(l=c.refresh.split(","),m=m.replace("&logintype=logout",""),m+="&refreshcontent=refresh",jQuery.ajax({type:"POST",url:f,async:!0,data:m,success:function(t){for(ix=0;ix<l.length;ix++)l[ix]=tctrim(l[ix]),setAJAXhtml(l[ix],t)}})),lougoutelem=document.getElementById("tx-tc-loginout"),lougoutelem&&jQuery("#tx-tc-loginout").css("display","none"),jQuery("#tx-tc-loginlogoutinprogress-"+i).removeClass("tx-tc-blockdisp"),jQuery("#tx-tc-loginlogoutinprogress-"+i).addClass("tx-tc-nodisp"),jQuery("#tx_toctoccomments_pi2").html(htmlforform)):(jQuery("#tx-tc-loginform").html(c.data),jQuery("#tx-tc-loginform").css("opacity","0"),toctoc_comments_fadein("tx-tc-loginform"),tt_showloginbind(),""!=c.refresh&&(l=c.refresh.split(","),m=m.replace("&logintype=logout",""),m+="&refreshcontent=refresh",jQuery.ajax({type:"POST",url:f,data:m,success:function(t){for(ix=0;ix<l.length;ix++)l[ix]=tctrim(l[ix]),setAJAXhtml(l[ix],t);1==sendbackafterloginout&&window.history.back()}}))))}}),jQuery("#frmtmplogout").remove,!1}function ttc_ajaxfeforgotpw(t){var e=t.form.id.substr(0,t.form.id.length-5),o=document.getElementById(t.form.id),r=t.form.id,c=t.form.action;c=c.replace("%5B","["),c=c.replace("%5D","]");var n=jQuery(t.form).serializeArray(),s=t.name;ttid="",ttrid="",ttcontentid="",savefpformhtml=document.getElementById("tx-tc-loginformfp").innerHTML,jQuery("#"+r).css("opacity","0.6");var a=0;for(i=1;i<10;i++)if(tr=o.parentNode,tr){if(tr.hasAttribute&&tr.hasAttribute("id")){if(ttid=tr.getAttribute("id"),ttrid=ttid.replace("tx-tc-cts-dp-",""),ttcontentidtest=ttid.replace("tx-tc-formsqueezer-",""),ttcontentidtest!==ttid&&(commentid=ttcontentidtest,ttcontentidtestarr=ttcontentidtest.split("6g9"),ttcontentid=ttcontentidtestarr[0]),ttid!==ttrid?a=1:(ttrid=ttid.replace("tx-tc-form-dp-",""),ttid!==ttrid&&(a=1)),1===a)break;ttid="",ttrid=""}o=tr}var d=0;if(""!==ttrid){var l=ttrid.lastIndexOf("_"),m=ttrid.substr(l+1),f=m.split("6g9");f.length>1&&(m=f[0],ttrid=ttrid.substr(0,l+1)+m)}else d=1;return jQuery.ajax({type:"POST",url:c,data:jQuery.param(jQuery(n))+"&"+s+"=1&tx_toctoccomments_pi2[ajax]="+e,success:function(t){var e=utf8_decode(tcb64_dec(t)),o=[],i=e.split("toctoc-data-sep");if(o.redirect=i[0],o.data=i[1],o.refresh=i[2],o.redirect)window.location.href=o.redirect;else{var c="";c=0===d?o.data:o.data,c=c.replace('class="tx-tc-status-for-felogin"','class="tx-tc-status-for-felogin tx-tc-blockdisp"'),c=c.replace('<div class="tx-tc-loginform tx-tc-nodisp" id="tx-tc-loginformfp">',""),c=c.substr(0,c.length-8),jQuery("#tx-tc-loginformfp").html(c),jQuery("#"+r).css("opacity","1"),window.setTimeout("rebindloginback()",5500)}}}),!1}function rebindloginback(){document.getElementById("tx-tc-loginformfp").innerHTML=savefpformhtml,function(t){t("#tx-tc-status-for-felogin").removeClass("tx-tc-nodisp"),t("#tx-tc-status-for-felogin").addClass("tx-tc-blockdisp"),t("#tx_toctoccomments_pi2_form").removeClass("tx-tc-nodisp"),t("#tx_toctoccomments_pi2_form").addClass("tx-tc-blockdisp"),t("#tx-tc-buttonfornewaccount").removeClass("tx-tc-nodisp"),t("#tx-tc-buttonfornewaccount").addClass("tx-tc-blockdisp"),t("#tx-tc-loginformfp").addClass("tx-tc-nodisp"),t("#tx-tc-loginformfp").removeClass("tx-tc-blockdisp"),t(".tx-tc-login-submitfo").on("click",function(){ttc_ajaxfeforgotpw(this)}),t("#u_0_0").on("click",function(){fbLogin()}),t("#tx-tc-loginformfp .tx-tc-loginbacklink").on("click",function(){t("#tx-tc-status-for-felogin").removeClass("tx-tc-nodisp"),t("#tx-tc-status-for-felogin").addClass("tx-tc-blockdisp"),t("#tx_toctoccomments_pi2_form").removeClass("tx-tc-nodisp"),t("#tx_toctoccomments_pi2_form").addClass("tx-tc-blockdisp"),t("#tx-tc-buttonfornewaccount").removeClass("tx-tc-nodisp"),t("#tx-tc-buttonfornewaccount").addClass("tx-tc-blockdisp"),t("#tx-tc-loginformfp").addClass("tx-tc-nodisp"),t("#tx-tc-loginformfp").removeClass("tx-tc-blockdisp")})}(jQuery)}function rebindanswersignup(){!function(t){t("#tx-tc-signonlink").off("click"),t("#tx-tc-buttonfornewaccount-bt").off("click"),t("#tx-tc-signonlink").on("click",function(){t("#tx-tc-loginformso").addClass("tx-tc-nodisp"),t("#tx-tc-loginformso").removeClass("tx-tc-blockdisp"),t("#tx-tc-buttonfornewaccount").removeClass("tx-tc-nodisp"),t("#tx-tc-buttonfornewaccount").addClass("tx-tc-blockdisp"),t("#tx-tc-forgotpw").addClass("tx-tc-blockdisp"),t("#tx-tc-forgotpw").removeClass("tx-tc-nodisp")}),t("#tx-tc-buttonfornewaccount-bt").on("click",function(){t("#tx-tc-buttonfornewaccount").addClass("tx-tc-nodisp"),t("#tx-tc-buttonfornewaccount").removeClass("tx-tc-blockdisp"),t("#tx-tc-loginformso").removeClass("tx-tc-nodisp"),t("#tx-tc-loginformso").addClass("tx-tc-blockdisp"),t("#tx-tc-forgotpw").addClass("tx-tc-nodisp"),t("#tx-tc-forgotpw").removeClass("tx-tc-blockdisp")}),t("#tx_toctoccomments_pi2_submitso").off("click"),t("#tx_toctoccomments_pi2_formso").off("click"),t("#tx_toctoccomments_pi2_submitso").on("click",function(){ttc_ajaxfesignup(this)}),t("#tx_toctoccomments_pi2_formso").on("submit",!1),t("#freecaprefresh").trigger("click")}(jQuery)}function ttc_ajaxfecp(t){var e=t.form.id.substr(0,t.form.id.length-7),o=document.getElementById(t.form.id),r=t.form.id,c=t.form.action;c=c.replace("%5B","["),c=c.replace("%5D","]");var n=jQuery(t.form).serializeArray(),s=t.name;if(""!=document.getElementById("tx_toctoc_comments_pi2-changepassword1").value&&""!=document.getElementById("tx_toctoc_comments_pi2-changepassword2").value){ttid="",ttrid="",ttcontentid="",jQuery("#"+r).css("opacity","0.6");var a=0;for(i=1;i<10;i++)if(tr=o.parentNode,tr){if(tr.hasAttribute&&tr.hasAttribute("id")){if(ttid=tr.getAttribute("id"),ttrid=ttid.replace("tx-tc-cts-dp-",""),ttcontentidtest=ttid.replace("tx-tc-formsqueezer-",""),ttcontentidtest!==ttid&&(commentid=ttcontentidtest,ttcontentidtestarr=ttcontentidtest.split("6g9"),ttcontentid=ttcontentidtestarr[0]),ttid!==ttrid?a=1:(ttrid=ttid.replace("tx-tc-form-dp-",""),ttid!==ttrid&&(a=1)),1===a)break;ttid="",ttrid=""}o=tr}var d=0;if(""!==ttrid){var l=ttrid.lastIndexOf("_"),m=ttrid.substr(l+1),f=m.split("6g9");f.length>1&&(m=f[0],ttrid=ttrid.substr(0,l+1)+m)}else d=1;return tttip("hide"),jQuery.ajax({type:"POST",url:c,data:jQuery.param(jQuery(n))+"&"+s+"=1&tx_toctoccomments_pi2[ajax]="+e,success:function(t){var e=utf8_decode(tcb64_dec(t)),o=[],i=e.split("toctoc-data-sep");if(o.redirect=i[0],o.data=i[1],o.refresh=i[2],o.redirect)window.location.href=o.redirect;else{var c="";c=0==d?o.data:o.data,c=c.replace('class="tx-tc-status-for-felogin"','class="tx-tc-status-for-felogin tx-tc-blockdisp"'),c=c.replace('<div class="tx-tc-loginform tx-tc-nodisp" id="tx-tc-loginformcp">',""),c=c.substr(0,c.length-8);var n=c.replace("ERROR","");jQuery("#tx_toctoccomments_pi2_cp").html(n),jQuery("#"+r).css("opacity","1"),$("#tx-tc-loginformcp").hasClass("tx-tc-nodisp")&&($("#tx-tc-loginformcp").addClass("tx-tc-blockdisp"),$("#tx-tc-loginformcp").removeClass("tx-tc-nodisp")),n==c?window.setTimeout("rebindcpback(1)",5500):window.setTimeout("rebindcpback(0)",5)}}}),!1}}function rebindcpback(t){!function(e){if(1==t){var o="";o=document.getElementById("tx_toctoccomments_pi2_cp")?"tx_toctoccomments_pi2_cp":"tx-tc-cpwf",toctoc_comments_fadeout(o)===!0&&(document.getElementById("tx-tc-loginformcp").innerHTML="",e("#tx-tc-loginformcp").addClass("tx-tc-nodisp"),e("#tx-tc-loginformcp").removeClass("tx-tc-blockdisp"))}0==t&&(e("#tx-tc-loginformcp").addClass("tx-tc-blockdisp"),e("#tx-tc-loginformcp").removeClass("tx-tc-nodisp"),e("#tx_toctoccomments_pi2_submitcp").on("click",function(){ttc_ajaxfecp(this)}))}(jQuery)}function ttc_ajaxfesignup(t){var e=t.form.id.substr(0,t.form.id.length-7),o=document.getElementById(t.form.id),r=t.form.id,c=t.form.action;c=c.replace("%5B","["),c=c.replace("%5D","]");var n=jQuery(t.form).serializeArray(),s=t.name,a="",d="",l=document.getElementById("usersignup");l&&""!==l.value&&(d=l.value),l=document.getElementById("password1"),l&&""!==l.value&&(a=l.value),ttid="",ttrid="",ttcontentid="",jQuery("#"+r).css("opacity","0.6");var m=0;for(i=1;i<10;i++)if(tr=o.parentNode,tr){if(tr.hasAttribute&&tr.hasAttribute("id")){if(ttid=tr.getAttribute("id"),ttrid=ttid.replace("tx-tc-cts-dp-",""),ttcontentidtest=ttid.replace("tx-tc-formsqueezer-",""),ttcontentidtest!==ttid&&(commentid=ttcontentidtest,ttcontentidtestarr=ttcontentidtest.split("6g9"),ttcontentid=ttcontentidtestarr[0]),ttid!==ttrid?m=1:(ttrid=ttid.replace("tx-tc-form-dp-",""),ttid!==ttrid&&(m=1)),1===m)break;ttid="",ttrid=""}o=tr}var f=0;if(""!==ttrid){var u=ttrid.lastIndexOf("_"),p=ttrid.substr(u+1),x=p.split("6g9");x.length>1&&(p=x[0],ttrid=ttrid.substr(0,u+1)+p)}else f=1;return tttip("hide"),jQuery.ajax({type:"POST",url:c,data:jQuery.param(jQuery(n))+"&"+s+"=1&tx_toctoccomments_pi2[ajax]="+e,success:function(t){var e=utf8_decode(tcb64_dec(t)),o=[],r=e.split("toctoc-data-sep");if(o.redirect=r[0],o.data=r[1],o.refresh=r[2],o.redirect)window.location.href=o.redirect;else{var i="";i=0===f?o.data:o.data,i=i.replace('class="tx-tc-status-for-felogin"','class="tx-tc-status-for-felogin tx-tc-blockdisp"'),i=i.replace('<div class="tx-tc-loginform tx-tc-nodisp" id="tx-tc-loginformso">',""),i=i.replace('href="#"','id="freecaprefresh" href="#"'),i=i.substr(0,i.length-8),i.indexOf("SIGNUPANDLOGINOK")>1?window.setTimeout("ttc_autoajaxfelogin('"+d+"', '"+a+"')",20):(i.indexOf("SIGNUPANDCONFIRM")>1,jQuery("#tx-tc-loginformso").html(i),window.setTimeout("rebindanswersignup()",10),jQuery("#tx-tc-loginformso").css("opacity","0"),toctoc_comments_fadein("tx-tc-loginformso"))}}}),!1}