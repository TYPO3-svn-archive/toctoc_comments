(function(e){jQuery.fn.extend({elastic:function(){var t=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","-moz-box-sizing","box-sizing","-webkit-box-sizing","padding-top","padding-bottom","fontWeight","border-top-width","border-right-width","border-bottom-width","border-left-width","borderTopStyle","borderTopColor","borderRightStyle","borderRightColor","borderBottomStyle","borderBottomColor","borderLeftStyle","borderLeftColor"];return this.each(function(){function c(){var e=Math.floor(parseInt(r.width(),10));if(o.width()!==e){o.css({width:e+"px"});p(true)}}function h(e,t){var n=Math.floor(parseInt(e,10));if(r.height()!==n){r.css({height:n+"px",overflow:t})}}function p(e){var t=r.val().replace(/&/g,"&").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />");var n=0,f=0;var l=o.html().replace(/<br>/ig,"<br />");if(e||t+"&nbsp;"!==l){o.html(t+"&nbsp;");n=o.height()+s+2;f=r.height()+s;if(Math.abs(n+u-f)>3){var c=n;if(c>=a){h(a,"auto")}else if(c<=i){h(i,"hidden")}else{h(c,"hidden")}}}}if(this.type!=="textarea"){return false}var n="";var r=jQuery(this),i=parseInt(r.css("height"),10)||u*3,s=0;if(r.css("-moz-box-sizing")){n=r.css("-moz-box-sizing")}else if(r.css("box-sizing")){n=r.css("box-sizing")}else if(r.css("-webkit-box-sizing")){n=r.css("-webkit-box-sizing")}if(n=="border-box"){s=parseInt(r.css("padding-bottom"),10)+parseInt(r.css("padding-top"),10)+parseInt(r.css("border-top-width"),10)+parseInt(r.css("border-bottom-width"),10);i=i+s}var o=jQuery("<div />").css({position:"absolute",display:"none","word-wrap":"break-word","white-space":"pre-wrap"}),u=parseInt(r.css("line-height"),10)||parseInt(r.css("font-size"),"10"),a=parseInt(r.css("max-height"),10)||Number.MAX_VALUE,f=0;if(a<0){a=Number.MAX_VALUE}o.appendTo(r.parent());var l=t.length;while(l--){o.css(t[l].toString(),r.css(t[l].toString()))}r.css({overflow:"hidden"});r.bind("keyup change cut paste",function(){p()});e(window).bind("resize",c);r.bind("resize",c);r.bind("update",p);r.bind("blur",function(){twinheight=o.height()+s+2;if(twinheight<a){if(twinheight>i){r.height(twinheight)}else{r.height(i)}}});r.bind("input paste",function(e){setTimeout(p,250)});p()})}})})(jQuery)